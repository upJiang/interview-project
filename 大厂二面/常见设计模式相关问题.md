# å¸¸è§è®¾è®¡æ¨¡å¼ç›¸å…³é—®é¢˜ - å‰ç«¯é¢è¯•æŒ‡å—

## ğŸ“‹ å¸¸è§é¢è¯•é¢˜ä¸ç­”æ¡ˆ

### Q1: ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿå‰ç«¯å¼€å‘ä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
è®¾è®¡æ¨¡å¼æ˜¯è§£å†³è½¯ä»¶è®¾è®¡ä¸­å¸¸è§é—®é¢˜çš„å¯é‡ç”¨è§£å†³æ–¹æ¡ˆã€‚å‰ç«¯å¸¸ç”¨æ¨¡å¼åŒ…æ‹¬å•ä¾‹ã€å·¥å‚ã€è§‚å¯Ÿè€…ã€ç­–ç•¥ç­‰ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// è®¾è®¡æ¨¡å¼åˆ†ç±»
class DesignPatterns {
  // åˆ›å»ºå‹æ¨¡å¼ï¼šå•ä¾‹ã€å·¥å‚ã€å»ºé€ è€…
  // ç»“æ„å‹æ¨¡å¼ï¼šé€‚é…å™¨ã€è£…é¥°å™¨ã€ä»£ç†
  // è¡Œä¸ºå‹æ¨¡å¼ï¼šè§‚å¯Ÿè€…ã€ç­–ç•¥ã€å‘½ä»¤
  
  constructor() {
    this.patterns = {
      creational: ['Singleton', 'Factory', 'Builder'],
      structural: ['Adapter', 'Decorator', 'Proxy'],
      behavioral: ['Observer', 'Strategy', 'Command']
    };
  }
}
```

### Q2: å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›å…¨å±€è®¿é—®ç‚¹ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// å•ä¾‹æ¨¡å¼å®ç°
class Singleton {
  constructor() {
    if (Singleton.instance) {
      return Singleton.instance;
    }
    Singleton.instance = this;
    this.data = [];
  }

  addItem(item) {
    this.data.push(item);
  }

  getData() {
    return this.data;
  }

  static getInstance() {
    if (!Singleton.instance) {
      Singleton.instance = new Singleton();
    }
    return Singleton.instance;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const instance1 = new Singleton();
const instance2 = new Singleton();
console.log(instance1 === instance2); // true

// æ¨¡å—åŒ–å•ä¾‹
const AppConfig = (function() {
  let instance;
  
  function createInstance() {
    return {
      apiUrl: 'https://api.example.com',
      timeout: 5000,
      retryCount: 3
    };
  }
  
  return {
    getInstance: function() {
      if (!instance) {
        instance = createInstance();
      }
      return instance;
    }
  };
})();
```

### Q3: å¦‚ä½•å®ç°å·¥å‚æ¨¡å¼ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
é€šè¿‡å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨newå…³é”®å­—ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// å·¥å‚æ¨¡å¼å®ç°
class ButtonFactory {
  createButton(type) {
    switch (type) {
      case 'primary':
        return new PrimaryButton();
      case 'secondary':
        return new SecondaryButton();
      case 'danger':
        return new DangerButton();
      default:
        throw new Error(`Unknown button type: ${type}`);
    }
  }
}

class Button {
  render() {
    throw new Error('render method must be implemented');
  }
}

class PrimaryButton extends Button {
  render() {
    return '<button class="btn btn-primary">Primary</button>';
  }
}

class SecondaryButton extends Button {
  render() {
    return '<button class="btn btn-secondary">Secondary</button>';
  }
}

class DangerButton extends Button {
  render() {
    return '<button class="btn btn-danger">Danger</button>';
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const factory = new ButtonFactory();
const primaryBtn = factory.createButton('primary');
const secondaryBtn = factory.createButton('secondary');

// æŠ½è±¡å·¥å‚æ¨¡å¼
class UIFactory {
  createButton() {
    throw new Error('createButton method must be implemented');
  }
  
  createInput() {
    throw new Error('createInput method must be implemented');
  }
}

class MaterialUIFactory extends UIFactory {
  createButton() {
    return new MaterialButton();
  }
  
  createInput() {
    return new MaterialInput();
  }
}

class BootstrapUIFactory extends UIFactory {
  createButton() {
    return new BootstrapButton();
  }
  
  createInput() {
    return new BootstrapInput();
  }
}
```

### Q4: å¦‚ä½•å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
å®šä¹‰å¯¹è±¡é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// è§‚å¯Ÿè€…æ¨¡å¼å®ç°
class EventEmitter {
  constructor() {
    this.events = {};
  }

  on(event, callback) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(callback);
  }

  off(event, callback) {
    if (!this.events[event]) return;
    
    const index = this.events[event].indexOf(callback);
    if (index > -1) {
      this.events[event].splice(index, 1);
    }
  }

  emit(event, data) {
    if (!this.events[event]) return;
    
    this.events[event].forEach(callback => {
      callback(data);
    });
  }

  once(event, callback) {
    const onceCallback = (data) => {
      callback(data);
      this.off(event, onceCallback);
    };
    this.on(event, onceCallback);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const emitter = new EventEmitter();

emitter.on('userLogin', (user) => {
  console.log('User logged in:', user);
});

emitter.on('userLogout', (user) => {
  console.log('User logged out:', user);
});

emitter.emit('userLogin', { id: 1, name: 'John' });

// Vue.jsé£æ ¼çš„å“åº”å¼ç³»ç»Ÿ
class Dep {
  constructor() {
    this.subscribers = new Set();
  }

  depend() {
    if (activeEffect) {
      this.subscribers.add(activeEffect);
    }
  }

  notify() {
    this.subscribers.forEach(effect => effect());
  }
}

let activeEffect = null;

function reactive(obj) {
  Object.keys(obj).forEach(key => {
    const dep = new Dep();
    let value = obj[key];
    
    Object.defineProperty(obj, key, {
      get() {
        dep.depend();
        return value;
      },
      set(newValue) {
        value = newValue;
        dep.notify();
      }
    });
  });
  
  return obj;
}

function watchEffect(effect) {
  activeEffect = effect;
  effect();
  activeEffect = null;
}
```

### Q5: å¦‚ä½•å®ç°ç­–ç•¥æ¨¡å¼ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œä½¿å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// ç­–ç•¥æ¨¡å¼å®ç°
class PaymentStrategy {
  pay(amount) {
    throw new Error('pay method must be implemented');
  }
}

class CreditCardStrategy extends PaymentStrategy {
  pay(amount) {
    console.log(`Paid $${amount} using Credit Card`);
  }
}

class PayPalStrategy extends PaymentStrategy {
  pay(amount) {
    console.log(`Paid $${amount} using PayPal`);
  }
}

class CryptoStrategy extends PaymentStrategy {
  pay(amount) {
    console.log(`Paid $${amount} using Cryptocurrency`);
  }
}

class ShoppingCart {
  constructor() {
    this.paymentStrategy = null;
  }

  setPaymentStrategy(strategy) {
    this.paymentStrategy = strategy;
  }

  checkout(amount) {
    if (!this.paymentStrategy) {
      throw new Error('Payment strategy not set');
    }
    this.paymentStrategy.pay(amount);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const cart = new ShoppingCart();
cart.setPaymentStrategy(new CreditCardStrategy());
cart.checkout(100);

// è¡¨å•éªŒè¯ç­–ç•¥
const validationStrategies = {
  required: (value) => value.length > 0 ? null : 'This field is required',
  email: (value) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value) ? null : 'Invalid email format',
  minLength: (min) => (value) => value.length >= min ? null : `Minimum length is ${min}`,
  maxLength: (max) => (value) => value.length <= max ? null : `Maximum length is ${max}`
};

class FormValidator {
  constructor() {
    this.validators = [];
  }

  addValidator(validator) {
    this.validators.push(validator);
  }

  validate(value) {
    for (const validator of this.validators) {
      const error = validator(value);
      if (error) return error;
    }
    return null;
  }
}
```

### Q6: å¦‚ä½•å®ç°è£…é¥°å™¨æ¨¡å¼ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
åŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œè€Œä¸æ”¹å˜å…¶ç»“æ„ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// è£…é¥°å™¨æ¨¡å¼å®ç°
class Coffee {
  cost() {
    return 10;
  }

  description() {
    return 'Simple coffee';
  }
}

class CoffeeDecorator {
  constructor(coffee) {
    this.coffee = coffee;
  }

  cost() {
    return this.coffee.cost();
  }

  description() {
    return this.coffee.description();
  }
}

class MilkDecorator extends CoffeeDecorator {
  cost() {
    return this.coffee.cost() + 2;
  }

  description() {
    return this.coffee.description() + ', milk';
  }
}

class SugarDecorator extends CoffeeDecorator {
  cost() {
    return this.coffee.cost() + 1;
  }

  description() {
    return this.coffee.description() + ', sugar';
  }
}

// ä½¿ç”¨ç¤ºä¾‹
let coffee = new Coffee();
coffee = new MilkDecorator(coffee);
coffee = new SugarDecorator(coffee);

console.log(coffee.cost()); // 13
console.log(coffee.description()); // Simple coffee, milk, sugar

// å‡½æ•°è£…é¥°å™¨
function log(target, name, descriptor) {
  const original = descriptor.value;
  
  descriptor.value = function(...args) {
    console.log(`Calling ${name} with:`, args);
    const result = original.apply(this, args);
    console.log(`Result:`, result);
    return result;
  };
  
  return descriptor;
}

class Calculator {
  @log
  add(a, b) {
    return a + b;
  }
}

// é«˜é˜¶å‡½æ•°è£…é¥°å™¨
function memoize(fn) {
  const cache = new Map();
  
  return function(...args) {
    const key = JSON.stringify(args);
    if (cache.has(key)) {
      return cache.get(key);
    }
    
    const result = fn.apply(this, args);
    cache.set(key, result);
    return result;
  };
}

const expensiveFunction = memoize((n) => {
  console.log('Computing...');
  return n * 2;
});
```

### Q7: å¦‚ä½•å®ç°é€‚é…å™¨æ¨¡å¼ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// é€‚é…å™¨æ¨¡å¼å®ç°
class OldAPI {
  getData() {
    return {
      user_id: 123,
      user_name: 'John Doe',
      user_email: 'john@example.com'
    };
  }
}

class NewAPI {
  getUser() {
    return {
      id: 456,
      name: 'Jane Smith',
      email: 'jane@example.com'
    };
  }
}

class UserAdapter {
  constructor(api) {
    this.api = api;
  }

  getData() {
    if (this.api instanceof OldAPI) {
      const data = this.api.getData();
      return {
        id: data.user_id,
        name: data.user_name,
        email: data.user_email
      };
    } else if (this.api instanceof NewAPI) {
      return this.api.getUser();
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const oldAPI = new OldAPI();
const newAPI = new NewAPI();

const oldAdapter = new UserAdapter(oldAPI);
const newAdapter = new UserAdapter(newAPI);

console.log(oldAdapter.getData()); // { id: 123, name: 'John Doe', email: 'john@example.com' }
console.log(newAdapter.getData()); // { id: 456, name: 'Jane Smith', email: 'jane@example.com' }

// ç¬¬ä¸‰æ–¹åº“é€‚é…å™¨
class jQueryAdapter {
  constructor(selector) {
    this.element = document.querySelector(selector);
  }

  on(event, handler) {
    this.element.addEventListener(event, handler);
  }

  off(event, handler) {
    this.element.removeEventListener(event, handler);
  }

  html(content) {
    if (content !== undefined) {
      this.element.innerHTML = content;
    }
    return this.element.innerHTML;
  }

  css(property, value) {
    if (value !== undefined) {
      this.element.style[property] = value;
    }
    return this.element.style[property];
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const $ = (selector) => new jQueryAdapter(selector);
$('#button').on('click', () => console.log('clicked'));
$('#content').html('<p>Hello World</p>');
```

### Q8: å¦‚ä½•å®ç°ä»£ç†æ¨¡å¼ï¼Ÿ

**æ ‡å‡†ç­”æ¡ˆï¼š**
ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚

**é¢è¯•å›ç­”æŠ€å·§ï¼š**
```javascript
// ä»£ç†æ¨¡å¼å®ç°
class Image {
  constructor(filename) {
    this.filename = filename;
    this.load();
  }

  load() {
    console.log(`Loading image: ${this.filename}`);
  }

  display() {
    console.log(`Displaying image: ${this.filename}`);
  }
}

class ProxyImage {
  constructor(filename) {
    this.filename = filename;
    this.realImage = null;
  }

  display() {
    if (!this.realImage) {
      this.realImage = new Image(this.filename);
    }
    this.realImage.display();
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const image = new ProxyImage('photo.jpg');
image.display(); // ç¬¬ä¸€æ¬¡ä¼šåŠ è½½å›¾ç‰‡
image.display(); // ç¬¬äºŒæ¬¡ç›´æ¥æ˜¾ç¤ºï¼Œä¸ä¼šé‡æ–°åŠ è½½

// è™šæ‹Ÿä»£ç†
class VirtualProxy {
  constructor(createFn) {
    this.createFn = createFn;
    this.instance = null;
  }

  getInstance() {
    if (!this.instance) {
      this.instance = this.createFn();
    }
    return this.instance;
  }
}

// ç¼“å­˜ä»£ç†
function createCacheProxy(fn) {
  const cache = new Map();
  
  return function(...args) {
    const key = JSON.stringify(args);
    if (cache.has(key)) {
      console.log('Returning cached result');
      return cache.get(key);
    }
    
    console.log('Computing result');
    const result = fn.apply(this, args);
    cache.set(key, result);
    return result;
  };
}

const expensiveOperation = createCacheProxy((a, b) => {
  // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
  return a + b;
});

// ä¿æŠ¤ä»£ç†
class ProtectedProxy {
  constructor(target) {
    this.target = target;
  }

  get(property) {
    if (property.startsWith('_')) {
      throw new Error(`Access denied to private property: ${property}`);
    }
    return this.target[property];
  }

  set(property, value) {
    if (property.startsWith('_')) {
      throw new Error(`Access denied to private property: ${property}`);
    }
    this.target[property] = value;
  }
}
```

## ğŸ¯ é¢è¯•æŠ€å·§æ€»ç»“

### å›ç­”ç­–ç•¥

**1. æ¨¡å¼ç†è§£**
- ç†è§£è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³å’Œé€‚ç”¨åœºæ™¯
- èƒ½å¤Ÿåˆ†ææ¨¡å¼çš„ä¼˜ç¼ºç‚¹

**2. ä»£ç å®ç°**
- å±•ç¤ºæ¸…æ™°çš„ä»£ç å®ç°
- è¯´æ˜æ¨¡å¼çš„åº”ç”¨åœºæ™¯

**3. å®é™…åº”ç”¨**
- ç»“åˆå‰ç«¯å®é™…åœºæ™¯
- å±•ç¤ºæ¨¡å¼çš„å®é™…ä»·å€¼

### åŠ åˆ†ç‚¹

1. **æ¨¡å¼æ€ç»´**ï¼šå±•ç¤ºå¯¹è®¾è®¡æ¨¡å¼çš„æ·±å…¥ç†è§£
2. **ä»£ç è´¨é‡**ï¼šå†™å‡ºæ¸…æ™°ã€å¯ç»´æŠ¤çš„ä»£ç 
3. **å®é™…åº”ç”¨**ï¼šç»“åˆå‰ç«¯å®é™…åœºæ™¯
4. **æ€§èƒ½è€ƒè™‘**ï¼šè€ƒè™‘æ¨¡å¼å¯¹æ€§èƒ½çš„å½±å“

### å¸¸è§è¯¯åŒº

1. **è¿‡åº¦è®¾è®¡**ï¼šä¸è¦ä¸ºäº†ä½¿ç”¨æ¨¡å¼è€Œä½¿ç”¨æ¨¡å¼
2. **å¿½è§†æ€§èƒ½**ï¼šè¦æ³¨æ„æ¨¡å¼å¯¹æ€§èƒ½çš„å½±å“
3. **ç¼ºä¹å®è·µ**ï¼šè¦æœ‰å®é™…çš„åº”ç”¨ç»éªŒ
4. **ä¸ç»“åˆåœºæ™¯**ï¼šè¦ç»“åˆå…·ä½“çš„ä¸šåŠ¡åœºæ™¯

### é¢è¯•å‡†å¤‡æ¸…å•

- [ ] æŒæ¡å¸¸ç”¨è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³
- [ ] ç†è§£æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å’Œä¼˜ç¼ºç‚¹
- [ ] èƒ½å¤Ÿæ‰‹å†™å¸¸è§æ¨¡å¼çš„å®ç°
- [ ] å‡†å¤‡å®é™…åº”ç”¨æ¡ˆä¾‹
- [ ] äº†è§£æ¨¡å¼å¯¹æ€§èƒ½çš„å½±å“

## ğŸ’¡ æ€»ç»“

è®¾è®¡æ¨¡å¼åœ¨å‰ç«¯å¼€å‘ä¸­ä¸»è¦ç”¨äºï¼š
1. **ä»£ç ç»„ç»‡**ï¼šæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§
2. **åŠŸèƒ½æ‰©å±•**ï¼šåŠ¨æ€æ·»åŠ æ–°åŠŸèƒ½è€Œä¸å½±å“ç°æœ‰ä»£ç 
3. **æ¥å£ç»Ÿä¸€**ï¼šé€‚é…ä¸åŒçš„APIå’Œåº“
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šé€šè¿‡ç¼“å­˜ã€æ‡’åŠ è½½ç­‰æ¨¡å¼ä¼˜åŒ–æ€§èƒ½

é¢è¯•æ—¶è¦é‡ç‚¹å±•ç¤ºï¼š
- å¯¹è®¾è®¡æ¨¡å¼åŸç†çš„ç†è§£
- æ¸…æ™°çš„ä»£ç å®ç°èƒ½åŠ›
- å®é™…åº”ç”¨å’Œé—®é¢˜è§£å†³èƒ½åŠ›
- ä»£ç ç»„ç»‡å’Œæ¶æ„è®¾è®¡èƒ½åŠ› 